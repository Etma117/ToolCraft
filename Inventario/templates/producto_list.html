<!-- producto_list.html -->
{% extends 'base.html' %}
{%load static%}

{% block title %}Lista de Productos{% endblock %}
{%block extra_css%}
<link rel="stylesheet" href="https://cdn.datatables.net/2.0.0/css/dataTables.dataTables.css">
<link  rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css">

{%endblock%}

{% block content %}

    <h1 >Lista de Productos</h1>
    <a href="{% url 'producto_create'%}" class="btn btn-custom-warning btn-sm">Nuevo producto</a>
    <div>
        <div class="dt-conteiner dt-bootstrap5" >
            <table class="table table-dark table-striped " id="productosTable" >
                <thead>
                <tr>
                    <th scope="col">#</th>
                    <th scope="col">Nombre</th>
                    <th scope="col">Medida</th>
                    <th scope="col">Código de Barras</th>
                    <th scope="col">Código Producto</th>
                    <th scope="col">Existencia</th>
                    <th scope="col">Precio de Venta</th>
                    <th scope="col">Precio de Compra</th>
                    <th scope="col">Acciones</th>
                </tr>
                </thead>
                <tbody>
                {% for producto in object_list %}
                    <tr>
                    <th scope="row">{{ forloop.counter }}</th>
                    <td>{{ producto.nombre }}</td>
                    <td>{{ producto.medida }}</td>
                    <td>{{ producto.codigo_barras }}</td>
                    <td>{{ producto.codigo_producto }}</td>
                    <td>{{ producto.existencia }}</td>
                    <td>{{ producto.precio_venta }}</td>
                    <td>{{ producto.precio_compra }}</td>
                    <td>
                        <a href="{% url 'producto_update' producto.pk %}" class="btn btn-custom-info btn-sm">Detalles</a>
                        <a href="#" onclick="return abrir_modal('{% url 'producto_update' producto.pk %}')" class="btn btn-custom-warning btn-sm">Editar</a>
                        <a href="{% url 'producto_delete' producto.pk %}" class="btn btn-custom-danger btn-sm">Eliminar</a>

                    </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div id="ventana_modal" class="modal fade" role="dialog"></div>
        </div>
    </div>
    


{% endblock %}

{%block extra_js%}

<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
<script scr="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.datatables.net/2.0.0/js/dataTables.js"></script>
<script src="https://cdn.datatables.net/2.0.0/js/dataTables.bootstrap5.js"></script>
<!-- Bootstrap 4 -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" ></script>
<!-- SweetAlert 2 -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    
<!--DataTable-->
<script>    	
        $('#productosTable').DataTable({
        "pagingType": "full_numbers",
        "lengthMenu": [10, 25, 50],
        "ordering": true,
        "responsive": true,
        language: {
            url: '//cdn.datatables.net/plug-ins/2.0.0/i18n/es-ES.json',
        },
      });
</script>

<script>
    function abrir_modal(url)
    {
        $('#ventana_modal').load(url, function()
        {
        $(this).modal({
            backdrop: 'static',
            keyboard: false
        })
        $(this).modal('show');
        });
        return false;
    }

</script>
{%endblock%}
